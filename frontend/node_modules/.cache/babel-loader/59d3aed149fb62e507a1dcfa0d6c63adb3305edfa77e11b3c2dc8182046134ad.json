{"ast":null,"code":"var _jsxFileName = \"/Users/diegosanmartin/Desktop/IE University/IE 2022/Everywhere/profiles/frontend/src/components/login/Login.jsx\",\n  _s = $RefreshSig$();\nimport { VStack, ButtonGroup, FormControl, FormLabel, Button, FormErrorMessage, Input, Heading } from '@chakra-ui/react';\nimport { useNavigate } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { useContext, useState } from 'react';\nimport { AccountContext } from '../AccountContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    setUser\n  } = useContext(AccountContext);\n  const {\n    error,\n    setError\n  } = useState(null);\n  const formik = useFormik({\n    initialValues: {\n      username: '',\n      password: ''\n    },\n    validationSchema: Yup.object({\n      username: Yup.string().required('Username required!').min(6, \"Username must be at least 6 characters\").max(28, \"Username must be at most 28 characters\"),\n      password: Yup.string().required('Password required!').min(6, \"Password must be at least 6 characters\").max(28, \"Password too long!\")\n    }),\n    onSubmit: (values, actions) => {\n      const vals = {\n        ...values\n      }; // copy the values\n      actions.resetForm(); // reset the form\n      fetch('http://localhost:4000/auth/login', {\n        // post the values to the login route\n        method: 'POST',\n        credentials: 'include',\n        // include the cookies\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(vals) // post vals as a JSON string\n      }).catch(err => {\n        return;\n      }).then(res => {\n        if (!res || !res.ok || res.status >= 400) {\n          return;\n        }\n        return res.json();\n      }).then(data => {\n        if (!data) return; // if no data, return\n        console.log(data);\n        setUser({\n          ...data\n        }); // set the user to the data\n        navigate('/home');\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(VStack, {\n    as: \"form\",\n    w: {\n      base: \"90%\",\n      md: \"500px\"\n    },\n    m: \"auto\",\n    justify: \"center\",\n    h: \"100vh\",\n    spacing: \"1rem\",\n    onSubmit: formik.handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Heading, {\n      as: \"h1\",\n      size: \"2xl\",\n      children: \"Log In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Text, {\n      as: \"p\",\n      color: \"red.500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      isInvalid: formik.errors.username && formik.touched.username,\n      children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n        fontSize: \"lg\",\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"username\",\n        placeholder: \"Enter Username\",\n        autoComplete: \"off\",\n        size: \"lg\",\n        ...formik.getFieldProps('username')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(FormErrorMessage, {\n        children: formik.errors.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      isInvalid: formik.errors.password && formik.touched.password,\n      children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n        fontSize: \"lg\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"password\",\n        placeholder: \"Enter Password\",\n        autoComplete: \"off\",\n        size: \"lg\",\n        type: \"password\",\n        ...formik.getFieldProps('password')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(FormErrorMessage, {\n        children: formik.errors.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n      paddingTop: \"1rem\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        colorScheme: \"teal\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => navigate(\"/signup\"),\n        children: \"Create Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 12\n  }, this);\n};\n_s(Login, \"VFH9/GwUx+6l18wDlyFLnQom088=\", false, function () {\n  return [useNavigate, useFormik];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["VStack","ButtonGroup","FormControl","FormLabel","Button","FormErrorMessage","Input","Heading","useNavigate","useFormik","Yup","useContext","useState","AccountContext","Login","navigate","setUser","error","setError","formik","initialValues","username","password","validationSchema","object","string","required","min","max","onSubmit","values","actions","vals","resetForm","fetch","method","credentials","headers","body","JSON","stringify","catch","err","then","res","ok","status","json","data","console","log","base","md","handleSubmit","errors","touched","getFieldProps"],"sources":["/Users/diegosanmartin/Desktop/IE University/IE 2022/Everywhere/profiles/frontend/src/components/login/Login.jsx"],"sourcesContent":["import { VStack, ButtonGroup, FormControl, FormLabel, Button, FormErrorMessage, Input, Heading } from '@chakra-ui/react'\nimport { useNavigate } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { useContext, useState } from 'react';\nimport { AccountContext } from '../AccountContext';\n\n\nconst Login = () => {\n\n    const navigate = useNavigate();\n    const {setUser} = useContext(AccountContext);\n    const { error, setError } = useState(null);\n\n    const formik = useFormik({\n        initialValues: {\n            username: '',\n            password: ''\n        },\n        validationSchema: Yup.object({\n            username: Yup.string().required('Username required!').min(6, \"Username must be at least 6 characters\").max(28, \"Username must be at most 28 characters\"),\n            password: Yup.string().required('Password required!').min(6, \"Password must be at least 6 characters\").max(28, \"Password too long!\")\n        }),\n        onSubmit: (values, actions) => {\n            const vals = {...values} // copy the values\n            actions.resetForm(); // reset the form\n            fetch('http://localhost:4000/auth/login', { // post the values to the login route\n                method: 'POST',\n                credentials: 'include', // include the cookies\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify(vals) // post vals as a JSON string\n                }).catch(err => {\n                    return;\n                }).then(res => {\n                    if (!res || !res.ok || res.status >= 400) {\n                        return;\n                    }\n                    return res.json();\n                })\n                .then(data => {\n                    if (!data) return; // if no data, return\n                    console.log(data);\n                    setUser({ ...data}) // set the user to the data\n                    navigate('/home');\n                })\n        }\n    });\n    \n    return <VStack as=\"form\" w={{base: \"90%\", md: \"500px\"}} m=\"auto\" justify=\"center\" h=\"100vh\" spacing=\"1rem\" onSubmit={formik.handleSubmit}>\n        <Heading as=\"h1\" size=\"2xl\">Log In</Heading>\n        <Text as=\"p\" color=\"red.500\">{error}</Text>\n        <FormControl isInvalid={formik.errors.username && formik.touched.username}>\n            <FormLabel fontSize=\"lg\">Username</FormLabel>\n            <Input\n              name=\"username\"\n              placeholder=\"Enter Username\"\n              autoComplete=\"off\"\n              size=\"lg\"\n              {...formik.getFieldProps('username')}\n            />\n            <FormErrorMessage>{formik.errors.username}</FormErrorMessage>\n        </FormControl>\n\n        <FormControl isInvalid={formik.errors.password && formik.touched.password}>\n            <FormLabel fontSize=\"lg\">Password</FormLabel>\n            <Input\n              name=\"password\"\n              placeholder=\"Enter Password\"\n              autoComplete=\"off\"\n              size=\"lg\"\n              type=\"password\"\n              {...formik.getFieldProps('password')}\n            />\n            <FormErrorMessage>{formik.errors.password}</FormErrorMessage>\n        </FormControl>\n\n        <ButtonGroup paddingTop=\"1rem\">\n            <Button type=\"submit\" colorScheme=\"teal\">Login</Button>\n            <Button onClick={() => navigate(\"/signup\")}>Create Account</Button>\n        </ButtonGroup>\n    </VStack>\n}\n\nexport default Login;\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}